jQuery(document).ready(function(e){function a(){m.find("[id*=_search_terms]").prop("readonly",!0),e("[id*=-search-kb]").prop("disabled",!0),e("#epkb-main-page-container").find("a").on("click",function(e){e.preventDefault()}),e("#eckb-article-page-container").find("a").on("click",function(e){e.preventDefault()}),e(".epkb-navigation-button").attr("onclick","").unbind("click")}function t(){var a,t=e("#epkb-article-page-button").hasClass("epkb-active-page"),i={action:"epkb_change_one_config_param_ajax",epkb_kb_id:e("#epkb_kb_id").val(),form:e("#epkb-config-config").serialize(),epkb_demo_kb:e("#epkb-layout-preview-data").is(":checked"),epkb_is_article_icon_active:t};e.ajax({type:"POST",dataType:"json",data:i,url:ajaxurl,beforeSend:function(a){e("#epkb-ajax-in-progress").text("Updating page preview ..."),e("#epkb-ajax-in-progress").dialog("open")}}).done(function(i){(i=i||"").error||void 0==i.message||void 0==i.kb_info_panel_output?a=i.message?i.message:_("",epkb_vars.reload_try_again,"error"):t?(e("#epkb-article-page-content").html(i.kb_info_panel_output),e("#epkb-article-page-content").trigger("article_content_changed")):(e("#epkb-main-page-content").html(i.kb_info_panel_output),e("#epkb-main-page-content").trigger("main_content_changed"))}).fail(function(e,t,i){a=i?" ["+i+"]":epkb_vars.unknown_error,a=_(epkb_vars.error_occurred+". "+epkb_vars.msg_try_again,a,"error")}).always(function(){e("#epkb-ajax-in-progress").dialog("close"),a&&(e(".epkb-kb-config-notice-message").replaceWith(a),e("html, body").animate({scrollTop:0},"slow"))})}function i(){e(".wp-picker-container ").on("click",function(){e(".epkb-picker-preview").remove(),e(this).find(".iris-picker-inner").before('<div class="epkb-picker-preview">Preview</div>')}),e(".wp-picker-container").on("click",".epkb-picker-preview",function(a){a.preventDefault(),a.stopPropagation();var t,i=e("#epkb-article-page-button").hasClass("epkb-active-page"),n={action:"epkb_change_one_config_param_ajax",epkb_kb_id:e("#epkb_kb_id").val(),form:e("#epkb-config-config").serialize(),epkb_demo_kb:e("#epkb-layout-preview-data").is(":checked"),epkb_is_article_icon_active:i};e.ajax({type:"POST",dataType:"json",data:n,url:ajaxurl,beforeSend:function(a){e("#epkb-ajax-in-progress").text("Updating page preview ..."),e("#epkb-ajax-in-progress").dialog("open")}}).done(function(a){(a=a||"").error||void 0==a.message||void 0==a.kb_info_panel_output?t=a.message?a.message:_("",epkb_vars.reload_try_again,"error"):i?(e("#epkb-article-page-content").html(a.kb_info_panel_output),e("#epkb-article-page-content").trigger("article_content_changed")):(e("#epkb-main-page-content").html(a.kb_info_panel_output),e("#epkb-main-page-content").trigger("main_content_changed"))}).fail(function(e,a,i){t=i?" ["+i+"]":epkb_vars.unknown_error,t=_(epkb_vars.error_occurred+". "+epkb_vars.msg_try_again,t,"error")}).always(function(){e("#epkb-ajax-in-progress").dialog("close"),t&&(e(".epkb-kb-config-notice-message").replaceWith(t),e("html, body").animate({scrollTop:0},"slow"))})})}function n(a,t){var n,o={action:"epkb_change_main_page_config_ajax",epkb_kb_id:e("#epkb_kb_id").val(),target_type:a,target_name:t,epkb_chosen_main_page_layout:e("#kb_main_page_layout_temp input[name=kb_main_page_layout_temp]:checked").val(),epkb_demo_kb:e("#epkb-layout-preview-data").is(":checked"),form:e("#epkb-config-config").serialize()};e.ajax({type:"POST",dataType:"json",data:o,url:ajaxurl,beforeSend:function(t){e("#epkb-ajax-in-progress").text("Switching "+a+" ..."),e("#epkb-ajax-in-progress").dialog("open")}}).done(function(t){(t=t||"").error||void 0==t.message||void 0==t.style_tab_output||void 0==t.colors_tab_output||void 0==t.kb_main_page_output?n=t.message?t.message:_("",epkb_vars.reload_try_again,"error"):(n=t.message,e("#epkb-main-page-content").html(t.kb_main_page_output),e("#epkb-main-page-content").trigger("main_content_changed"),"layout"==a&&(e("#epkb-admin-mega-menu").html(t.kb_mega_menu),d.page_switching("epkb-main-page"),e("#epkb-article-page-content").html(t.article_page_output),e("#epkb-article-page-content").trigger("article_content_changed"),t.ordering_output&&e("#epkb-config-ordering-sidebar").replaceWith(t.ordering_output),t.overview_page_output&&e("#epkb-config-overview-content").html(t.overview_page_output),t.main_page_text_output&&e("#epkb-config-text-sidebar").replaceWith(t.main_page_text_output),p(!1,a,t.article_page_layout,t)),"NONE"!=t.style_tab_output&&e("#epkb-config-styles-sidebar").replaceWith(t.style_tab_output),"NONE"!=t.colors_tab_output&&e("#epkb-config-colors-sidebar").replaceWith(t.colors_tab_output))}).fail(function(e,a,t){n=t?" ["+t+"]":epkb_vars.unknown_error,n=_(epkb_vars.error_occurred+". "+epkb_vars.msg_try_again,n,"error")}).always(function(){e("#epkb-ajax-in-progress").dialog("close"),0==e("#epkb-config-colors-sidebar .wp-picker-container").length&&(e("#epkb-config-colors-sidebar .ekb-color-picker input").wpColorPicker(),i()),n&&(e(".epkb-kb-config-notice-message").replaceWith(n),e("html, body").animate({scrollTop:0},"slow"))})}function o(a,t){var n,o={action:"epkb_change_article_page_config_ajax",epkb_kb_id:e("#epkb_kb_id").val(),target_type:a,target_name:t,epkb_chosen_article_page_layout:e("#kb_article_page_layout_temp input[name=kb_article_page_layout_temp]:checked").val(),epkb_demo_kb:e("#epkb-layout-preview-data").is(":checked"),form:e("#epkb-config-config").serialize()};e.ajax({type:"POST",dataType:"json",data:o,url:ajaxurl,beforeSend:function(t){e("#epkb-ajax-in-progress").text("Switching "+a+" ..."),e("#epkb-ajax-in-progress").dialog("open")}}).done(function(e){var i=p(!0,a,t,e);n=i.length>0?i:e.message}).fail(function(e,a,t){n=t?" ["+t+"]":epkb_vars.unknown_error,n=_(epkb_vars.error_occurred+". "+epkb_vars.msg_try_again,n,"error")}).always(function(){e("#epkb-ajax-in-progress").dialog("close"),0==e("#epkb-config-article-colors-sidebar .wp-picker-container").length&&(e("#epkb-config-article-colors-sidebar .ekb-color-picker input").wpColorPicker(),i()),n&&(e(".epkb-kb-config-notice-message").replaceWith(n),e("html, body").animate({scrollTop:0},"slow"))})}function p(a,t,i,n){return(n=n||"").error||void 0==n.message||void 0==n.article_style_tab_output||void 0==n.article_colors_tab_output?n.message?n.message:_("",epkb_vars.reload_try_again,"error"):(a&&("NONE"!=n.kb_mega_menu&&e("#epkb-admin-mega-menu").html(n.kb_mega_menu),d.page_switching("epkb-article-page")),e("#epkb-article-page-content").html(n.article_page_output),e("#epkb-article-page-content").trigger("article_content_changed"),"NONE"!=n.article_style_tab_output&&e("#epkb-config-article-styles-sidebar").replaceWith(n.article_style_tab_output),"NONE"!=n.article_colors_tab_output&&e("#epkb-config-article-colors-sidebar").replaceWith(n.article_colors_tab_output),"NONE"!=n.article_text_tab_output&&e("#epkb-config-article-text-sidebar").replaceWith(n.article_text_tab_output),n.article_general_tab_output&&e("#epkb-config-article-general-sidebar").replaceWith(n.article_general_tab_output),"")}function c(){var a;a=!e("#eckb-mm-mp-links-organize").hasClass("epkb-mm-active"),r(),e(".epkb-config-content .epkb-top-categories-list").sortable("option","disabled",a),e(".epkb-config-content .epkb-categories-list").sortable("option","disabled",a),e(".epkb-config-content .epkb-sub-category").sortable("option","disabled",a),e(".epkb-config-content .epkb-sub-sub-category").sortable("option","disabled",a),e(".epkb-config-content .epkb-articles").sortable("option","disabled",a),e(".epkb-config-content .epkb-top-categories-list").sortable("option","disabled",a),e(".epkb-config-content .epkb-categories-list").sortable("option","disabled",a),e(".epkb-config-content .epkb-sub-category").sortable("option","disabled",a),e(".epkb-config-content .epkb-sub-sub-category").sortable("option","disabled",a),e(".epkb-config-content .epkb-articles").sortable("option","disabled",a);var t=a?"auto":"move";e("#epkb-content-container").css("cursor",t,"important"),e(".epkb-config-content").find("a").css("cursor",t,"important")}function r(){e(".epkb-config-content .epkb-top-categories-list").sortable({axis:"x",forceHelperSize:!0,forcePlaceholderSize:!0,opacity:.8,placeholder:"epkb-sortable-placeholder",update:function(a,t){e("#epkb-main-page").closest(".epkb-info-pages").hasClass("epkb-active-page")&&e("#epkb-config-ordering-sidebar").find("input[name=categories_display_sequence][value=user-sequenced]").click()}}),e(".epkb-config-content .epkb-categories-list").sortable({axis:"x,y",forceHelperSize:!0,forcePlaceholderSize:!0,opacity:.8,placeholder:"epkb-sortable-placeholder",update:function(a,t){e("#epkb-main-page").closest(".epkb-info-pages").hasClass("epkb-active-page")&&e("#epkb-config-ordering-sidebar").find("input[name=categories_display_sequence][value=user-sequenced]").click()}}),e(".epkb-config-content .epkb-sub-category").sortable({axis:"x,y",forceHelperSize:!0,forcePlaceholderSize:!0,opacity:.8,placeholder:"epkb-sortable-placeholder",update:function(a,t){e("#epkb-main-page").closest(".epkb-info-pages").hasClass("epkb-active-page")&&e("#epkb-config-ordering-sidebar").find("input[name=categories_display_sequence][value=user-sequenced]").click()}}),e(".epkb-config-content .epkb-sub-sub-category").sortable({axis:"x,y",forceHelperSize:!0,forcePlaceholderSize:!0,opacity:.8,placeholder:"epkb-sortable-placeholder",update:function(a,t){e("#epkb-main-page").closest(".epkb-info-pages").hasClass("epkb-active-page")&&e("#epkb-config-ordering-sidebar").find("input[name=categories_display_sequence][value=user-sequenced]").click()}}),e(".epkb-config-content .epkb-articles, .epkb-articles").sortable({axis:"y",forceHelperSize:!0,forcePlaceholderSize:!0,opacity:.8,placeholder:"epkb-sortable-placeholder",update:function(a,t){e("#epkb-main-page").closest(".epkb-info-pages").hasClass("epkb-active-page")&&e("#epkb-config-ordering-sidebar").find("input[name=articles_display_sequence][value=user-sequenced]").click()}})}function s(){var a=[];return e("#epkb-main-page-content").find("[data-kb-type]").each(function(t,i){var n=e(this).data("kb-top-category-id")?e(this).data("kb-top-category-id"):"";n&&a.push([n,"category"]);var o=void 0==e(this).data("kb-category-id")?e(this).data("kb-article-id"):e(this).data("kb-category-id");void 0!=o&&a.push([o,e(this).attr("data-kb-type")])}),a}function l(a){var t,i={action:"epkb_change_to_non_custom_sequence",_wpnonce_epkb_save_kb_config:e("#_wpnonce_epkb_save_kb_config").val(),epkb_kb_id:e("#epkb_kb_id").val(),form:e("#epkb-config-config").serialize(),sequence_type:a,articles_sequence_new_value:g("articles_display_sequence","articles_display_sequence"),categories_sequence_new_value:g("categories_display_sequence","categories_display_sequence"),epkb_new_sequence:s(),epkb_chosen_main_page_layout:e("#kb_main_page_layout_temp input[name=kb_main_page_layout_temp]:checked").val(),epkb_demo_kb:e("#epkb-layout-preview-data").is(":checked")};e.ajax({type:"POST",dataType:"json",data:i,url:ajaxurl,beforeSend:function(a){e("#epkb-ajax-in-progress").text("Switching article sequence ..."),e("#epkb-ajax-in-progress").dialog("open")}}).done(function(a){(a=a||"").error||void 0==a.message||void 0==a.kb_main_page_output?t=a.message?a.message:_("",epkb_vars.reload_try_again,"error"):(t=a.message,e("#epkb-main-page-content").html(a.kb_main_page_output),e("#epkb-main-page-content").trigger("main_content_changed"))}).fail(function(e,a,i){t=i?" ["+i+"]":epkb_vars.unknown_error,t=_(epkb_vars.error_occurred+". "+epkb_vars.msg_try_again,t,"error")}).always(function(){e("#epkb-ajax-in-progress").dialog("close"),t&&(e(".epkb-kb-config-notice-message").replaceWith(t),e("html, body").animate({scrollTop:0},"slow"))})}function b(){var a=e(".epkb-nav-tabs li"),t=0;e("#epkb-content-container").find(a).each(function(){var a=e(this).outerHeight(!0);a>t&&(t=a)}),e("#epkb-content-container").find(a).css("min-height",t)}function k(e){e.parents(".radio-buttons-vertical").find(".input_container").removeClass("checked-radio"),e.attr("checked")&&e.parent().addClass("checked-radio")}function _(e,a,t){return'<div class="epkb-kb-config-notice-message"><div class="contents"><span class="'+t+'">'+(e?"<h4>"+e+"</h4>":"")+(a||"")+"</span></div></div>"}function g(a,t){var i={};return e.each(e("input[id^="+a+"]").serializeArray(),function(e,a){i[a.name]=a.value}),void 0===i[t]?"":i[t]}var m=e("#ekb-admin-page-wrap");e("#epkb-main-page-content").bind("main_content_changed",function(){b(),c(),a()}),e("#epkb-article-page-content").bind("article_content_changed",function(){a()}),e("#epkb-list-of-kbs").on("change",function(a){var t=e(this).find(":selected").data("kb-admin-url");t&&(window.location.href=t)}),e("#epkb-config-main-info").find(".page-icon").on("click",function(){e(".epkb-kb-config-notice-message").html(""),e(".option-info-icon").removeClass("active-info"),e(".option-info-content").addClass("hidden"),e("#epkb-main-page").show(),e("#epkb-article-page").show(),e(".epkb-info-section").removeClass("epkb-active-page"),e(this).parent().parent().toggleClass("epkb-active-page"),e(".epkb-config-content").hide(),e(".epkb-config-sidebar").removeClass("open-menu"),e("#epkb-article-page-settings").hide(),e("#epkb-main-page-settings").hide(),e(".config-option-group").removeClass("epkb-mm-active"),e(".epkb-mega-menu-toggle").show();var a=e(this).attr("id");if(d.page_switching(a),e("#"+a+"-content").fadeToggle(),"epkb-main-page"==a)e("#epkb-main-page-settings").show(),e(".epkb-info-save").show(),c(),e("#epkb-main-page-content").show(),"kb_templates"==e("#templates_for_kb_temp input[name=templates_for_kb_temp]:checked").val()&&e(".eckb-mm-mp-links-setup-main-template-content").addClass("epkb-mm-active");else if("epkb-article-page"==a){e("#epkb-article-page-settings").show(),e(".epkb-info-save").show(),c();var t=e("#kb_article_page_layout_temp input[name=kb_article_page_layout_temp]:checked").val();0==e("#epkb-article-page-content").html().trim().length&&o("layout",t),e("#epkb-article-page-content").show()}else e(".epkb-info-save").hide(),e(".epkb-mega-menu-toggle").hide()}),e(".epkb-demo-data-button").on("click",".ep_icon_info",function(){e(this).toggleClass("active-info"),e(".epkb-demo-info-content").toggleClass("hidden")});var d={general:function(){e("#epkb-config-main-info .epkb-setting-icon").on("click",function(){e(this).parent().parent().toggleClass("epkb-active-page"),e("#epkb-admin-mega-menu").toggle()}),e("#epkb-admin-mega-menu").on("click",".epkb-mm-sidebar li",function(){e(".epkb-mm-sidebar li").removeClass("epkb-mm-active"),e(".epkb-mm-links li").removeClass("active-link"),e(this).addClass("epkb-mm-active"),e(".epkb-mm-content .epkb-mm-links").removeClass("epkb-mm-active"),e(".config-option-group").removeClass("epkb-mm-active");var a=e(this).attr("id");e(".epkb-mm-content").find("#"+a+"-list").addClass("epkb-mm-active"),"eckb-mm-mp-links-organize"==a&&(e(".eckb-mm-mp-links-organize--organize-content").addClass("epkb-mm-active"),e("#epkb-config-ordering-sidebar").show()),c()}),e("#epkb-admin-mega-menu").on("click",".epkb-mm-links li",function(){var a=e(this).parents(".epkb-mm-links").attr("id");if("eckb-mm-mp-links-setup-list"!==a&&"eckb-mm-ap-links-setup-list"!==a){e(".epkb-mm-links li").removeClass("active-link"),e(this).addClass("active-link"),e(".config-option-group").removeClass("epkb-mm-active");var t=e(this).attr("id");e(".epkb-config-sidebar").find("."+t+"-content").addClass("epkb-mm-active")}}),e("#epkb-admin-mega-menu").on("click",".epkb-close-mm",function(){e(".epkb-open-mm").show(),e("#epkb-admin-mega-menu").slideUp(600)}),e(".epkb-open-mm").on("click",function(){e(this).hide(),e("#epkb-admin-mega-menu").slideDown(600)}),e("#epkb-admin-mega-menu").on("click","#templates_for_kb_temp_group",function(){e(".config-option-group").removeClass("epkb-mm-active"),"kb_templates"==e("#templates_for_kb_temp input[name=templates_for_kb_temp]:checked").val()&&e(".eckb-mm-mp-links-setup-main-template-content").addClass("epkb-mm-active"),e("#templates_for_kb").val(e("#templates_for_kb_temp input[name=templates_for_kb_temp]:checked").val())})},page_switching:function(a){return e(".epkb-open-mm").hide(),"epkb-main-page"===a?(e("#epkb-admin-mega-menu").show(),e(".epkb-mm-links").removeClass("epkb-mm-active"),e("#eckb-mm-mp-links").show(),e("#eckb-mm-ap-links").hide(),e("#eckb-mm-mp-links li").removeClass("epkb-mm-active"),e("#eckb-mm-mp-links-setup").addClass("epkb-mm-active"),e("#eckb-mm-mp-links-setup-list").addClass("epkb-mm-active"),e("#eckb-mm-ap-links-setup-list").removeClass("epkb-mm-active")):"epkb-article-page"===a?(e("#epkb-admin-mega-menu").show(),e(".epkb-mm-links").removeClass("epkb-mm-active"),e("#eckb-mm-ap-links").show(),e("#eckb-mm-mp-links").hide(),e("#eckb-mm-ap-links li").removeClass("epkb-mm-active"),e("#eckb-mm-ap-links-setup").addClass("epkb-mm-active"),e("#eckb-mm-ap-links-setup-list").addClass("epkb-mm-active"),e("#eckb-mm-mp-links-setup-list").removeClass("epkb-mm-active")):"epkb-config-overview"===a&&e("#epkb-admin-mega-menu").hide(),this},drag_drop:function(){e("#epkb-admin-mega-menu").on("click","#eckb-mm-mp-links-organize",function(){e(".epkb-section-container").animate({backgroundColor:"#00ff00"},1).animate({backgroundColor:"#ffffff"},1500),e(".epkb-nav-tabs").animate({backgroundColor:"#00ff00"},1).animate({backgroundColor:"#ffffff"},1500),e(".epkb-panel-container ").animate({backgroundColor:"#00ff00"},1).animate({backgroundColor:"#ffffff"},1500),e(".epkb-categories-list").animate({backgroundColor:"#00ff00"},1).animate({backgroundColor:"#ffffff"},1500),e(".sidebar-sections").animate({backgroundColor:"#00ff00"},1).animate({backgroundColor:"#ffffff"},1500)})}};d.general(),d.drag_drop(),e("#epkb_cancel_config, #epkb_cancel_dashboard").on("click",function(){location.reload()}),e("#epkb-main-page-button").hasClass("epkb-active-page")||e("#epkb-article-page-button").hasClass("epkb-active-page")?e(".epkb-info-save").show():e(".epkb-info-save").hide(),e("#templates_for_kb_temp_group").find(":radio").on("click",function(){k(e(this))}),e("[id*=-search-toggle]").on("click",function(){e("#epkb-article-page-content").find("[id*=-search-toggle]").slideToggle()}),e("#ekb-admin-page-wrap").find("[id*=_search_terms]").prop("readonly",!0),e("[id*=-search-kb]").prop("disabled",!0),e("#kb_name_tmp").on("keyup",function(){var a=25-e(this).val().length;e("#character_value").remove(),a<0&&e(this).after('<div id="character_value" class="input_error"><p>'+epkb_vars.reduce_name_size+"</p></div>")}),m.on("click",".epkb-info",function(){e(this).parent().toggleClass("epkb-preview-active-info"),e(this).parent().find(".epkb-preview-information").slideToggle(),e(this).parent().next().css("opacity",".2"),e(this).parent().hasClass("epkb-preview-active-info")||e(this).parent().next().css("opacity","1")});var u=0;e("#epkb-config-config").on("change",function(e){void 0!=e.target.id&&(e.target.id.includes("reset_style")||e.target.id.match("^categories_display_sequence")||e.target.id.match("^articles_display_sequence")||e.target.id.match("^epkb-layout-preview-data")||e.target.id.match("^kb_main_page_layout_temp")||e.target.id.match("^kb_article_page_layout_temp")||e.target.id.match("grid_category_icon$")||e.target.id.match("article_common_path*")||e.target.id.match("kb_articles_common_path"))||(e.preventDefault(),e.stopPropagation(),"number"==e.target.type?(clearTimeout(u),u=setTimeout(function(){t()},1e3)):t())});var f={done:function(e,a){},clear:function(){}};e(".ekb-color-picker input").wpColorPicker(f),i(),e(".epkb-config-sidebar").find(":radio").on("click",function(){k(e(this))}),a(),e(".epkb-sidebar-container").on("click",".option-info-icon",function(a){a.preventDefault();var t=e(this).parents(".config-option-group").find(".option-info-content").hasClass("hidden");e(".option-info-icon").removeClass("active-info"),e(".option-info-content").addClass("hidden");var i=e(this).parents(".epkb-sidebar-container").position();t&&(e(this).addClass("active-info"),e(this).parents(".config-option-group").find(".option-info-content").removeClass("hidden"),e(this).parents(".config-option-group").find(".option-info-content").css({top:i.top+30,right:e(".epkb-sidebar-container").outerWidth(!0)+20}))}),e("#epkb-config-main-info").on("change","#epkb-layout-preview-data",function(e){e.preventDefault(),n("demo","demo")}),e("#epkb-admin-mega-menu").on("change","#kb_main_page_layout_temp :input",function(a){a.preventDefault(),e("#kb_main_page_layout").val(a.target.value);var t=a.target.value;e("#kb_main_page_layout_temp input[name=kb_main_page_layout_temp]").blur(),n("layout",t)}),e("#epkb-admin-mega-menu").on("change","#main_page_reset_style :input",function(a){a.preventDefault();var t=a.target.value;e("#main_page_reset_style input[name=main_page_reset_style]").prop("checked",!1),n("style",t)}),e("#epkb-admin-mega-menu").on("click","#main_page_reset_colors :button",function(a){a.preventDefault();var t=a.target.value;e("#main_page_reset_colors input[name=reset_colors]").prop("checked",!1),n("colors",t)}),e("body").on("change","#kb_article_page_layout_temp_group",function(a){a.preventDefault();var t=a.target.value;e("#kb_article_page_layout").val(a.target.value),e(".config-option-group").removeClass("epkb-mm-active"),e("#kb_article_page_layout_temp input[name=kb_article_page_layout_temp]").blur(),o("layout",t)}),e("body").on("change","#article_page_reset_style :input",function(a){a.preventDefault();var t=a.target.value;e("#article_page_reset_style input[name=article_page_reset_style]").prop("checked",!1),o("style",t)}),e("body").on("click","#article_page_reset_colors :button",function(a){a.preventDefault();var t=a.target.value;e("#reset_colors input[name=reset_colors]").prop("checked",!1),o("colors",t)}),e("#epkb_save_kb_config, #epkb_save_dashboard").on("click",function(a){a.preventDefault();var t="";console.log("Saving");var i=[];e(".epkb_top_categories").each(function(a,t){var n=e(this).find("[data-kb-category-id]").data("kb-category-id");n&&i.push(n)}),e("#kb_name").val(e("#kb_name_tmp").val()),e("#kb_article_page_layout").val(e("#kb_article_page_layout_temp input[name=kb_article_page_layout_temp]:checked").val()),e("#kb_main_page_layout").val(e("#kb_main_page_layout_temp input[name=kb_main_page_layout_temp]:checked").val()),e("#templates_for_kb").val(e("#templates_for_kb_temp input[name=templates_for_kb_temp]:checked").val());var n={action:"epkb_save_kb_config_changes",_wpnonce_epkb_save_kb_config:e("#_wpnonce_epkb_save_kb_config").val(),epkb_kb_id:e("#epkb_kb_id").val(),form:e("#epkb-config-config").serialize(),epkb_new_sequence:s(),top_cat_sequence:i};e.ajax({type:"POST",dataType:"json",data:n,url:ajaxurl,beforeSend:function(a){e("#epkb-ajax-in-progress").text(epkb_vars.save_config),e("#epkb-ajax-in-progress").dialog("open")}}).done(function(a){function i(){location.reload()}(a=a||"").error||void 0==a.message?t=a.message?a.message:_("",epkb_vars.reload_try_again,"error"):(t=a.message,e("#epkb-content-container").find(".epkb-sortable-item-highlight").each(function(a,t){e(this).removeClass("epkb-sortable-item-highlight")}),t.indexOf("RELOAD")>=0&&(e(".epkb-kb-config-notice-message").replaceWith(t),t="",e("html, body").animate({scrollTop:0},"slow"),window.setTimeout(i,2e3)))}).fail(function(e,a,i){t=i?" ["+i+"]":epkb_vars.unknown_error,t=_(epkb_vars.not_saved+" "+epkb_vars.msg_try_again,t,"error")}).always(function(){e("#epkb-ajax-in-progress").dialog("close"),t&&(e(".epkb-kb-config-notice-message").replaceWith(t),e("html, body").animate({scrollTop:0},"slow"))})}),e("#epkb-main-page-settings").on("change","#articles_display_sequence",function(e){e.preventDefault(),l("articles_sequence")}),e("#epkb-main-page-settings").on("change","#categories_display_sequence",function(e){e.preventDefault(),l("categories_sequence")}),b(),e("#epkb-config-main-info").on("click",".epkb-info-pages",function(){b()}),e("#epkb-main-page-content").on("click",".epkb_top_categories",function(){e(this).parent().find("li").removeClass("active"),e(this).addClass("active"),e("#epkb-main-page-container").find(".epkb-tab-panel").removeClass("active"),e(".epkb-panel-container .epkb-tab-panel:nth-child("+(e(this).index()+1)+")").addClass("active")}),e("#epkb-main-page-content").on("click",".epkb-section-body .epkb-category-level-2-3",function(){function a(e){r.hasClass(e[0])?(r.removeClass(e[0]),r.addClass(e[1])):r.hasClass(e[1])&&(r.removeClass(e[1]),r.addClass(e[0]))}var t=["ep_icon_plus","ep_icon_minus"],i=["ep_icon_plus_box","ep_icon_minus_box"],n=["ep_icon_right_arrow","ep_icon_down_arrow"],o=["ep_icon_arrow_carrot_right","ep_icon_arrow_carrot_down"],p=["ep_icon_arrow_carrot_right_circle","ep_icon_arrow_carrot_down_circle"],c=["ep_icon_folder_add","ep_icon_folder_open"],r=e(this).find("i");a(t),a(i),a(n),a(o),a(p),a(c)}),e("#epkb-main-page-content").on("click",".epkb-section-body .epkb-category-level-2-3",function(){e(this).next().toggleClass("active")}),e("#epkb-main-page-content").on("click",".epkb-show-all-articles",function(){e(this).toggleClass("active");var a=e(this).parent("ul").find("li");e(this).hasClass("active")?(e(this).find(".epkb-show-text").addClass("epkb-hide-elem"),e(this).find(".epkb-hide-text").removeClass("epkb-hide-elem")):(e(this).find(".epkb-show-text").removeClass("epkb-hide-elem"),e(this).find(".epkb-hide-text").addClass("epkb-hide-elem")),e(a).each(function(){e(this).hasClass("epkb-hide-elem")?(e(this).removeClass("epkb-hide-elem"),e(this).addClass("visible")):e(this).hasClass("visible")&&(e(this).removeClass("visible"),e(this).addClass("epkb-hide-elem"))})});var v;e(document).ajaxComplete(function(){clearTimeout(v),v=setTimeout(function(){m.find(".epkb-kb-config-notice-message").addClass("fadeOutDown")},1e4),m.find(".epkb-kb-config-notice-message").on("click",".epkb-close-notice",function(){e(this).parent().addClass("fadeOutUp")}),e(".epkb-config-sidebar, #mega-menu-main-page-layout").find(":radio").on("click",function(){k(e(this))}),e(".epkb-config-sidebar, #mega-menu-main-page-layout").find(":radio").each(function(){k(e(this))}),e("#templates_for_kb_temp_group").find(":radio").on("click",function(){k(e(this))})}),e("#epkb-config-overview-content").find("#epkb_close_upgrade").on("click",function(){e("#epkb-config-overview-content").find(".epkb_upgrade_message").hide();var a={action:"epkb_close_upgrade_message"};e.ajax({type:"POST",dataType:"json",url:ajaxurl,data:a})}),e("#epkb-main-page-button").hasClass("epkb-active-page")&&(e("#epkb-config-main-info").find("#epkb-main-page").click(),"kb_templates"==e("#templates_for_kb_temp input[name=templates_for_kb_temp]:checked").val()&&e(".eckb-mm-mp-links-setup-main-template-content").addClass("epkb-mm-active"))});